{% extends 'base.html' %}
{% block content %}
<section class="results-page">
  <div class="results-header">
    <div class="results-icon">ğŸ‰</div>
    <h1 class="results-title">Congratulations!</h1>
    <p class="results-subtitle">You have completed the English Proficiency Test</p>
  </div>

  <div class="results-card">
    <h2 class="results-card-title">Your Results</h2>
    
    <div class="results-grid">
      <div class="result-item">
        <div class="result-icon">ğŸ“š</div>
        <div class="result-content">
          <span class="result-label">Niveau 1 (Facile)</span>
          <span class="result-value">{{ summary.score_niveau1 }} points</span>
        </div>
      </div>
      
      <div class="result-item">
        <div class="result-icon">ğŸ“</div>
        <div class="result-content">
          <span class="result-label">Niveau 2 (Grammaire)</span>
          <span class="result-value">{{ summary.score_niveau2 }} points</span>
        </div>
      </div>
      
      <div class="result-item">
        <div class="result-icon">âœï¸</div>
        <div class="result-content">
          <span class="result-label">Niveau 3 (Conjugaison)</span>
          <span class="result-value">{{ summary.score_niveau3 }} points</span>
        </div>
      </div>
    </div>

    <div class="results-total">
      <div class="total-score">
        <span class="total-label">Total Score</span>
        <span class="total-value">{{ summary.total_score }} / {{ summary.total_questions }}</span>
        <div class="score-bar">
          <div class="score-fill" style="width: {{ (summary.total_score / summary.total_questions * 100)|round }}%"></div>
        </div>
      </div>
      
      <div class="cefr-level">
        <span class="level-label">CEFR Level</span>
        <span class="level-badge">{{ summary.level }}</span>
      </div>
    </div>

    {% if summary.total_score >= 18 %}
    <div class="certificate-eligible">
      <div class="eligible-icon">ğŸ†</div>
      <div class="eligible-content">
        <h3>Excellent Performance!</h3>
        <p>You scored {{ summary.total_score }}/{{ summary.total_questions }} - You are eligible for a certificate!</p>
      </div>
    </div>
    
    <div class="results-actions">
      <form method="post" action="{{ url_for('certificate') }}">
        <button class="btn-certificate" type="submit">
          <span class="btn-icon">ğŸ“œ</span>
          <span>Download Certificate</span>
        </button>
      </form>
      <a class="btn-restart" href="{{ url_for('index') }}">
        <span class="btn-icon">ğŸ”„</span>
        <span>Take Another Test</span>
      </a>
    </div>
    {% else %}
    <div class="certificate-not-eligible">
      <div class="not-eligible-icon">ğŸ“š</div>
      <div class="not-eligible-content">
        <h3>Keep Practicing!</h3>
        <p>You scored {{ summary.total_score }}/{{ summary.total_questions }}. You need at least 18/20 to be eligible for a certificate.</p>
        <p>Don't give up! Take the test again to improve your score.</p>
      </div>
    </div>
    
    <div class="results-actions">
      <a class="btn-restart" href="{{ url_for('index') }}">
        <span class="btn-icon">ğŸ”„</span>
        <span>Try Again</span>
      </a>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}
